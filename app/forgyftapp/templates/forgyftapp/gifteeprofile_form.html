{% extends "base.html" %}
{% block content %}
	<div class="ui main container">
		<div class="ui three column center stackable grid">
			<div class="three wide column"></div>
			<div class="ten wide column">
				<p style="text-align: center; padding-bottom: 4px; font-size: 16px">Enter Gift Ideas</p>

				<form action="" method="post">{% csrf_token %}
					{{ form.as_p }}

					<table class="table">
						{{ giftideas.management_form }}
						<!-- After management form -->
						{% for form in giftideas.forms %}
							{% if forloop.first %}
								<thead>
								<tr>
									{% for field in form.visible_fields %}
										<th>{{ field.label|capfirst }}</th>
									{% endfor %}
								</tr>
								</thead>
							{% endif %}
							<tr class="{% cycle row1 row2 %} formset_row">
								{% for field in form.visible_fields %}
									<td>
										{# Include the hidden fields in the form #}
										{% if forloop.first %}
											{% for hidden in form.hidden_fields %}
												{{ hidden }}
											{% endfor %}
										{% endif %}
										{{ field.errors.as_ul }}
										{% if field.field.widget.input_type == "select" %}
											<div class="ui field form">
												<label for="{{ field.id_for_label }}"
												       style="display: inline">{{ field.label }}</label>
												{% if field.help_text %}
													<label style="font-weight: 100; font-size: 13px; display: inline">
														- {{ field.help_text }}</label>
												{% endif %}
												<select class="ui search nullable dropdown" name="{{ field.html_name }}"
												        id="{{ field.id_for_label }}">
													{#						{% for instance in field.field.queryset %}#}
													{#							<option value="{{ instance.pk }}">{{ instance|stringformat:"s" }}</option>#}
													{#						{% endfor %}#}
													{% if not field.field.queryset or not field.field.required %}
														<option value="" selected>---------</option>
													{% endif %}
													{% for choice in field.field.choices %}
														{% if field.value|stringformat:"s" == choice.0|stringformat:"s" %}
															<option value="{{ choice.0 }}"
															        selected>{{ choice.1 }}</option>
														{% else %}
															<option value="{{ choice.0 }}">{{ choice.1 }}</option>
														{% endif %}
													{% endfor %}
												</select>
											</div>
										{% elif field.field.widget.input_type == "checkbox" %}
											<div class="inline field">
												<div class="ui toggle checkbox">
													<input {% if field.value == True %}checked{% endif %}
													       type="checkbox" tabindex="0" class="hidden"
													       style="display: inline"
													       name="{{ field.html_name }}" id="{{ field.id_for_label }}">
													<label for="{{ field.id_for_label }}"
													       style="display: inline">{{ field.label }}</label>
													{% if field.help_text %}
														<p style="font-weight: 100; display: inline"> -
															{% autoescape off %}
																{{ field.help_text }}{% endautoescape %}</p>
													{% endif %}
												</div>
											</div>
										{% else %}
											<div class="field">
												<!--- default field {{ field.field.widget.template_name }} -->
												{% if field.field.widget.input_type == "textarea" %}
													<!-- textarea -->
												{% endif %}
												<label for="{{ field.id_for_label }}"
												       style="display: inline">{{ field.label }}</label>
												{% if field.help_text %}
													<label style="font-weight: 100; font-size: 13px; display: inline"> -
														{% autoescape off %}
															{{ field.help_text }}{% endautoescape %}</label>
												{% endif %}
												<div class="ui input">
													{{ field }}
												</div>
											</div>
										{% endif %}
									</td>
								{% endfor %}
							</tr>
						{% endfor %}
					</table>
					<input type="submit" value="Save"/> <a href="{% url 'forgyftapp:giftee-list' %}">back to the list</a>
				</form>

			</div>
			<div class="three wide column"></div>
		</div>
	</div>


	<script src="{% load static %}{% static "jquery.formset.js" %}"></script>
	<script type="text/javascript">
		$('.formset_row').formset({
			addText: 'add family member',
			deleteText: 'remove',
			prefix: 'familymember_set'
		});
	</script>
{% endblock %}